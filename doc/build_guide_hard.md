# MoooseFreeのビルドガイド
## 目次

- [目次](#目次)
- [頒布時の状態](#頒布時の状態)
- [キット構成](#キット構成)
  - [ご自身で購入いただくもの(リンクは例です。)](#ご自身で購入いただくものリンクは例です)
  - [キット内容一覧](#キット内容一覧)
  - [ケース(キットに含まれます)](#ケースキットに含まれます)
  - [基板(キットに含まれます)](#基板キットに含まれます)
  - [バッテリーサイズの参考](#バッテリーサイズの参考)
- [はんだ付け](#はんだ付け)
  - [マイコン(Xiao)はんだ付けの下準備](#マイコンxiaoはんだ付けの下準備)
  - [バッテリ端子](#バッテリ端子)
  - [ダイオード、MX互換キースイッチソケット](#ダイオードmx互換キースイッチソケット)
  - [リセットスイッチ](#リセットスイッチ)
  - [タクトスイッチ](#タクトスイッチ)
  - [ロータリーエンコーダ(任意)](#ロータリーエンコーダ任意)
  - [電源スイッチ](#電源スイッチ)
  - [はんだ付け後](#はんだ付け後)

## 頒布時の状態  
ケースが組み立てられた状態になっています。  
また後半の組み立ての章をざっとご覧いただき、ねじを外していってください。  
一度分解すると構造がよくわかるとおもいます。  

## キット構成
### ご自身で購入いただくもの(リンクは例です。)
| ご自身で手配いただくもの    | 個数            | 例(参考リンク) |
| :-------------------------- | :-------------- | :-------------- |
| 表面実装ダイオード(1N4148W) | 9個             | https://shop.yushakobo.jp/products/a0800di-02-100?variant=37665574420641 |
| タクトスイッチ<br>(6x6x5mm 2pin)| 18個             | https://shop.yushakobo.jp/products/a0800ts-02-1 |
| ホットスワップ<br>(MX用orロープロファイル)|最大58個| https://shop.yushakobo.jp/products/a01ps?variant=37665172521121 |
| キースイッチ<br>(MX互換orロープロファイル)|最大58個| ※ロープロファイルは未対応です。 |
| ロータリーエンコーダ<br>(軸形状:Dカット、高さ20mm)| 任意(おすすめ2個) | https://shop.yushakobo.jp/products/3762?variant=42672275292391 |
| リチウムイオンバッテリ<br>(※無線にする際の構成例)<br>21.8mm(横) x 40mm(縦) x 8.4mm(厚さ)より一回り小さいもの| 2個(左右1個ずつ)            | 以下は入ること確認済みです。<br>・EEMBリチウムポリマー電池 3.7V 300 mAh<br>https://www.amazon.co.jp/dp/B09DPPP8ZV?ref_=chk_typ_imgToDp<br>・EEMB リチウムポリマーバッテリー 3.7V 250mAh<br>https://www.amazon.co.jp/dp/B08FD3V6TF?psc=1&smid=A6AC39XNLAVZ4&ref_=chk_typ_imgToDp |

![](./build_guide_image/)

※本キットは無線使用に限定するものではありません。  
また、バッテリーも例でありこれに限定するものではありません。  

### キット内容一覧
Mustで含まれるものと、オプションで選択可能なものがあります。  

#### キットに含まれるもの
| キットに含まれるもの         |  個数           |
| :--------------------------  | :-------------- |
| ケース一式(トラボ支持球含む) |  1セット |
| 基板                         |  1セット |
| 光学センサと周辺部品<br>(右基板にはんだ付け済みです。) | 1セット |
| シリコンチップ               |  2個 |
| 電源スイッチ(トグルスイッチ) |  2個 |
| バッテリー端子               |  2個 |
| ネジ(M2x8mm)                 |  1個 |
| ネジ(M2x4mm)                 | 13個 |
| カプトンテープ               | カットして使用 |
| エンコーダのノブ             | 大1個,小1個    |

#### オプション
Booth購入画面のオプションでキットに含むか選択ください。  
※55mmトラックボール x 1 (有り版/無し版あり。色は赤ですが、どこかで黒にするかも。)  
※Xiao ble nRF52840 x 1  (当面は付けます)  

### ケース(キットに含まれます)  
色は黒と白を考えています。写真は白です。  
  1.ケース上(左右)
  2.ケース下(左右)
  3.ミドルプレート(左右)
  4.トラボ筐体(※トラボ支持球3つもキットに同梱されます)  
  5.トラボカバー
  6.4方向スイッチカバー(左右)

![](./build_guide_image/01_構成/)

トラボカバーは回転でロックが可能な機構にしていますが、初めのうちは固い場合があります。  
バッテリーカバーの部分を力強く押すと割れてしまう場合があるので、必ず根元をもって回転させてください。  
![](./build_guide_image/)

また、トラボ筐体も上からの力に弱い部分があります。  
上から強い力をかけないようにしてください。  
ケースメイン部にねじ止めした状態で扱うことを推奨します。  
![](./build_guide_image/01_構成/壊れ方例.jpg)

### 基板(キットに含まれます)


### バッテリーサイズの参考
リポバッテリーを使用する際は以下のサイズが例になります。  
ケース内にバッテリを収納するため、このサイズよりも一回りちいさいものがよいでしょう。  
![](./build_guide_image/01_構成/)

## はんだ付け
### マイコン(Xiao)はんだ付けの下準備
マイコンには購入したときにピンヘッダが付属されていると思います。  
これは位置合わせに使用します。  
**注意：ピンヘッダははんだ付けしないでください。**  

#### カプトンテープ  
まずXiaoの背面の一部をカプトンテープで絶縁します。  
テープでの絶縁が無しでも大丈夫な基板設計にしていますが、はんだ付けに自信がない方は(ある方も)ぜひ貼ってください。  
バッテリー短絡やリセットスイッチの短絡を防ぎましょう  
付属のテープを適当なサイズにはさみなどでカットしてください。  
![](./build_guide_image/02_はんだ付け/カプトンテープ.jpg)

以下の画像のように貼ってください。  
画像では長方形を3枚貼りました。  
(青色のマスキングテープは後述しますので、今は無視してください。)  
![](./build_guide_image/02_はんだ付け/Xiaoカプトンテープ.jpg)
![](./build_guide_image/02_はんだ付け/Xiaoカプトンテープ2.jpg)

#### マイコンの予備はんだ  
マイコンに予備はんだしておきます(赤枠部分)。  
少しだけ盛り上がるぐらいで構いません。  
あらかじめ少しだけはんだをつけておいてください。後々楽です。  
![](./build_guide_image/02_はんだ付け/xiao予備はんだ.jpg)

#### 基板の予備はんだ  
基板側の端面スルーホール3か所に予備はんだしておきます。  
少しだけつける程度で大丈夫です  
![](./build_guide_image/02_はんだ付け/)


#### マイコンの位置合わせ  
基板の表面、光学センサのレンズがある側にXiaoをはめます。  
付属するピンヘッダを使って位置合わせをします。  
**位置合わせだけですのでピンヘッダははんだ付けしないでください！**  
![](./build_guide_image/02_はんだ付け)

ピンヘッダで位置を合わせたら  
![](./build_guide_image/02_はんだ付け)

マスキングテープなどで固定してください。  
![](./build_guide_image/02_はんだ付け)

裏面から見るとこうなっているはず。背面のパッド4か所をはんだ付けします。  

はんだ付けのコツは傾けて重力を活用し、パッドから端面スルーホールに滑らせるようにする点。  

繰り返しますがピンヘッダははんだ付け**しない**でください。  
RET(リセット)とBAT+(バッテリー)  
下の2つ  

BAT+パッドのはんだ付け。  
カプトンテープもあり隣のバッテリ-パッドとショートはしないはずです。  
はんだ付けしやすいように穴もがっつり空けています。  
![](./build_guide_image/02_はんだ付け/マイコン01.jpg)

同じ要領でRST、NFCもはんだ付けしてください。  
![](./build_guide_image/02_はんだ付け/マイコン02.jpg)

最後に表面の端面スルーホールを基板のパッドとはんだ付けします。  
ピンヘッダは外してくださいね。  
![](./build_guide_image/02_はんだ付け)


### バッテリ端子
基板の裏側にバッテリ端子をはんだ付けします。  
バッテリ端子ですが、ペンチなどで足の部分を伸ばして穴に刺さるようにするとはんだ付けしやすいです。  
![](./build_guide_image/02_はんだ付け/バッテリー端子01.jpg)

固定用パットの片側にはんだを盛ってください。  
側面の片側をはんだ付けします。  
このとき、位置・向きがずれないようにしてください。  
![](./build_guide_image/02_はんだ付け/バッテリー端子02.jpg)

表側を向けて端子2か所をはんだ付けします。  
足を伸ばしていれば刺さっているはずです。  
(曲がったままでも表面実装のようにはんだ付けしてしまって構いません。)  
電源関係の部品なので、ショートしないよう注意してください。  
![](./build_guide_image/02_はんだ付け/バッテリー端子04.jpg)

はんだ付けできたら反対側の固定用パットもはんだ付けしてください。  
![](./build_guide_image/02_はんだ付け/バッテリー端子03.jpg)

### ダイオード、MX互換キースイッチソケット  
ダイオードは表面実装タイプになっています。  
枠内の|◁の縦線とダイオードの縦線で方向を合わせてください。  
また、白枠の外側にも線を追加しています。  
この向きは自作キーボードで特定のキーが動かない原因になるあるあるなので向きに注意してください。  
![](./build_guide_image/02_はんだ付け/ダイオード.jpg)

キースイッチソケットも上記の画像のようにはんだ付けしてください。  
※ロータリーエンコーダをつける場合、該当箇所にはソケットをはんだ付けしないでください。  
ロータリーエンコーダと干渉します。  

MX互換の場合  
![](./build_guide_image/02_はんだ付け/ソケット01.jpg)
ロープロファイルの場合  
![](./build_guide_image/02_はんだ付け/ソケット02.jpg)

### リセットスイッチ
マイコンリセットで使用するスイッチです。  
マイコンにファイルを書き込む際にはこのスイッチを短く2回連続で押してください。  
![](./build_guide_image/02_はんだ付け)  

### タクトスイッチ
手前に5個、奥に2個、カバーで隠れる部分に1個、片手で合計8個装着可能です。  
私はBluetooth接続切換えにも使用しています。  
要領はどれも同じなので写真は手前部分のみ。  
角度がずれるとミドルプレートがうまくはまらないので注意していください。  
はんだ付けしたら余分な足はニッパーでカットしてください。  
![](./build_guide_image/02_はんだ付け/タクトスイッチ01.jpg)
![](./build_guide_image/02_はんだ付け/タクトスイッチ02.jpg)

### ロータリーエンコーダ(任意)
足が合計5本あります。  
![](./build_guide_image/02_はんだ付け)

### 電源スイッチ
2か所穴が空いています。表面からトグルスイッチをはめてください。  
はまるようにしかはまらないので迷わないと思います。  
裏面からはんだ付けしてください。  
![](./build_guide_image/02_はんだ付け/電源スイッチ01.jpg)
![](./build_guide_image/02_はんだ付け/電源スイッチ02.jpg)

### はんだ付け後
こうなります。表面。  
![](./build_guide_image/02_はんだ付け)  
裏面。  
![](./build_guide_image/02_はんだ付け)

